---
import Tracking from '../page-helpers/Tracking.astro';
import { generalMetaTags } from '../content/metaTags';
import { getLocale } from 'astro-i18n-aut';
import generalDataGetter from '../content/general';
import Footer from '../components/Footer/Footer';
import Section from '../components/Section/Section';
import Jumbotron from '../components/Jumbotron/Jumbotron';
import Form from '../components/Form/Form';
import Link from '../components/Link/Link';

const locale = getLocale(Astro.url);
const generalData = generalDataGetter(locale);

const {
  pageMetaTags,
} = Astro.props;

const metaTags = [
  ...generalMetaTags(Astro.generator),
  pageMetaTags,
];

---

<!doctype html>
<html lang={locale}>
  <head>
    <title>{generalData.siteData.title}</title>
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />

    {metaTags.map((tag) => <meta {...tag} />)}

    <script>
      import FlyingFocus from '../helpers/flying-focus/flying-focus';

      window.flyingFocus = new FlyingFocus();
    </script>

    <style is:global lang="scss">
      @import '../styles/global';
    </style>

    <link rel="preconnect" href="https://cdn.squeaky.ai" crossorigin />

  </head>
  <body>
    <slot />

    <Section highlight fullWidth>
      <Jumbotron {...generalData.jumbotronContact} />

      <Form
        client:load
        {...generalData.contactFormData}
      >

        <div slot="privacyNote">
          <p>{generalData.contactFormData.privacyNote.preLink} <Link href="#">{generalData.contactFormData.privacyNote.link}</Link> {generalData.contactFormData.privacyNote.postLink}</p>
        </div>

      </Form>

    </Section>

    <Footer {...generalData.footerData(locale)}/>

    <Tracking />
  </body>
</html>
